{% extends 'frontend/routine/show.html.twig' %}

{% block routine_content %}
    <p>
        {{ 'Goals'|trans }}: {{ routine.goals|length }}
        <a class="btn btn-primary btn-sm float-right" href="{{ path('frontend_goal_new', {'uuid': routine.uuid}) }}">
            <i class="fas fa-bullseye"></i>
            {{ 'Create goal'|trans }}
        </a>
    </p>
    {% if routine.goals|length %}
        <ul class="nav nav-tabs">
            {% if routine.goalsNotCompleted|length %}
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#not-completed">
                        {{ 'Not completed'|trans }}
                    </a>
                </li>
            {% endif %}
            {% if routine.goalsCompleted|length %}
                <li class="nav-item">
                    <a class="nav-link{% if routine.goalsNotCompleted|length == 0 %} active{% endif %}" data-toggle="tab" href="#completed">
                        {{ 'Completed'|trans }}
                    </a>
                </li>
            {% endif %}
        </ul>
        <div id="myTabContent" class="tab-content mt-1">
            {% if routine.goalsNotCompleted|length %}
                <div class="tab-pane fade active show" id="not-completed">
                    <table class="table table-dark">
                        <thead>
                            <tr>
                                <th>{{ 'Name'|trans }}</th>
                                <th>{{ 'Description'|trans }}</th>
                                <th>{{ 'Updated at'|trans }}</th>
                                <th>{{ 'Actions'|trans }}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for goal in routine.goalsNotCompleted %}
                                <tr>
                                    <td>{{ goal.name }}</td>
                                    <td>{{ goal.description }}</td>
                                    <td style="width: 15%;">{{ goal.updatedAt ? goal.updatedAt|date('Y-m-d H:i:s') : '' }}</td>
                                    <td style="width: 25%;">
                                        <a class="btn btn-primary btn-sm m-1" href="{{ path('frontend_goal_complete', {'uuid': goal.uuid}) }}">
                                            <i class="fas fa-check"></i>
                                            {{ 'Complete'|trans }}
                                        </a>
                                        <a class="btn btn-success btn-sm m-1" href="{{ path('frontend_goal_edit', {'uuid': goal.uuid}) }}">
                                            <i class="fas fa-edit"></i>
                                            {{ 'Edit'|trans }}
                                        </a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% endif %}
            {% if routine.goalsCompleted|length %}
                <div class="tab-pane fade{% if routine.goalsNotCompleted|length == 0 %} active show{% endif %}" id="completed">
                    <table class="table table-dark">
                        <thead>
                            <tr>
                                <th>{{ 'Name'|trans }}</th>
                                <th>{{ 'Description'|trans }}</th>
                                <th>{{ 'Updated at'|trans }}</th>
                                <th>{{ 'Actions'|trans }}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for goal in routine.goalsCompleted %}
                                <tr>
                                    <td>{{ goal.name }}</td>
                                    <td>{{ goal.description }}</td>
                                    <td style="width: 15%;">{{ goal.updatedAt ? goal.updatedAt|date('Y-m-d H:i:s') : '' }}</td>
                                    <td style="width: 25%;">
                                        <a class="btn btn-success btn-sm m-1" href="{{ path('frontend_goal_edit', {'uuid': goal.uuid}) }}"><i class="fas fa-edit"></i> {{ 'Edit'|trans }}</a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% endif %}
        </div>
    {% endif %}
{% endblock %}
